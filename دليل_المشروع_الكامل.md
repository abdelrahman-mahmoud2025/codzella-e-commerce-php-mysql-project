# ๐ ุฏููู ุจูุงุก ูุชุฌุฑ CodeZilla ุงูุฅููุชุฑููู ูู ุงูุตูุฑ

---

## ๐ ุงูููุฏูุฉ

ุงูููู ุฏู ูู ุฏูููู ุงูุดุงูู ูุจูุงุก ูุดุฑูุน ูุชุฌุฑ ุฅููุชุฑููู ุงุญุชุฑุงูู ูู ุงูุตูุฑ ุจุงุณุชุฎุฏุงู **PHP** ู **MySQL**.

### ๐ฏ ูุชุชุนูู ุฅููุ

- ุฅุฒุงู ุชุจูู **ูุธุงู MVC** ูุฏูู ูู ุงูุตูุฑ (ุจุฏูู ูุฑููููุฑู)
- ุฅุฒุงู ุชุชุนุงูู ูุน **ูุงุนุฏุฉ ุจูุงูุงุช MySQL** ุจุดูู ุขูู
- ุฅุฒุงู ุชุนูู **ูุธุงู ุชุณุฌูู ุฏุฎูู** ู **ุตูุงุญูุงุช** (ุนููุงุก ูุฃุฏูู)
- ุฅุฒุงู ุชุจูู **ุณูุฉ ุชุณูู** (Shopping Cart)
- ุฅุฒุงู ุชุชุนุงูู ูุน **ุงูุฏูุน ุงูุฅููุชุฑููู** ุจุงุณุชุฎุฏุงู Stripe
- ุฅุฒุงู ุชุฃูู ูููุนู ุถุฏ **ุงูุงุฎุชุฑุงูุงุช** (SQL Injection, XSS, CSRF)

### ๐๏ธ ุฅูู ูู ุงููุดุฑูุน ุฏูุ

**CodeZilla Store** ูู ูุชุฌุฑ ุฅููุชุฑููู ูุชูุงูู ููู:
- **ูุงุฌูุฉ ููุนููุงุก**: ููุฏุฑูุง ูุชุตูุญูุง ุงูููุชุฌุงุชุ ูุถูููุง ููุณูุฉุ ููุดุชุฑูุง
- **ููุญุฉ ุชุญูู ููุฃุฏูู**: ุฅุฏุงุฑุฉ ุงูููุชุฌุงุชุ ุงูุชุตูููุงุชุ ูุงูุทูุจุงุช
- **ูุธุงู ุทูุจุงุช**: ูุชุงุจุนุฉ ุญุงูุฉ ุงูุทูุจ ูู ุงูุจุฏุงูุฉ ููููุงูุฉ
- **ุฏูุน ุฅููุชุฑููู**: ุชูุงูู ูุน Stripe ููุฏูุน ุงูุขูู

---

## ๐๏ธ ููู ูููู ุงููุดุฑูุน (ุงูุจูุช ุงููู ููุจููู)

ุชุฎูู ุฅูู ุจุชุจูู ุจูุช ูู 4 ุทูุงุจู. ูู ุทุงุจู ููู ุฏูุฑู:

```
codezilla-store/              # "ุงูุจูุช ุงูุฑุฆูุณู"
โ
โโโ config/                   # ๐ง "ุบุฑูุฉ ุงููุญุฑูุงุช" - ุฅุนุฏุงุฏุงุช ุงููุดุฑูุน
โ   โโโ env.php              # ููู ุงูุฅุนุฏุงุฏุงุช ุงูุณุฑูุฉ (ุจุงุณููุฑุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุชุ ููุงุชูุญ Stripe)
โ   โโโ env.example.php      # ูููุฐุฌ ููู ุงูุฅุนุฏุงุฏุงุช (ูููุดุงุฑูุฉ ูุน ุงููุฑูู)
โ   โโโ database.php         # "ุงูููุตู" - ุงูุงุชุตุงู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โโโ database.sql         # "ุงููุฎุทุท" - ุชุตููู ุงูุฌุฏุงูู ูุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ
โ
โโโ app/                      # ๐ง "ุงูุนูู ุงููุฏุจุฑ" - ูู ุงูููุฌูู ูุงูููุฏ ุงูุฃุณุงุณู
โ   โโโ controllers/         # "ุงููุฏูุฑูู" - ุจูุณุชูุจููุง ุงูุทูุจุงุช ูููุฌูููุง
โ   โ   โโโ HomeController.php
โ   โ   โโโ AuthController.php       # ูุฏูุฑ ุชุณุฌูู ุงูุฏุฎูู/ุงูุฎุฑูุฌ
โ   โ   โโโ ProductController.php    # ูุฏูุฑ ุนุฑุถ ุงูููุชุฌุงุช
โ   โ   โโโ CartController.php       # ูุฏูุฑ ุณูุฉ ุงูุชุณูู
โ   โ   โโโ OrderController.php      # ูุฏูุฑ ุงูุทูุจุงุช
โ   โ   โโโ AdminController.php      # ูุฏูุฑ ููุญุฉ ุงูุชุญูู
โ   โ
โ   โโโ models/              # "ุงููุฎุฒู ุงูุฐูู" - ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
โ   โ   โโโ User.php         # ุงูุชุนุงูู ูุน ุจูุงูุงุช ุงููุณุชุฎุฏููู
โ   โ   โโโ Category.php     # ุงูุชุนุงูู ูุน ุงูุชุตูููุงุช
โ   โ   โโโ Product.php      # ุงูุชุนุงูู ูุน ุงูููุชุฌุงุช
โ   โ   โโโ Order.php        # ุงูุชุนุงูู ูุน ุงูุทูุจุงุช
โ   โ
โ   โโโ helpers/             # "ุตูุฏูู ุงูุนุฏุฉ" - ุฃุฏูุงุช ูุณุงุนุฏุฉ
โ       โโโ SessionHelper.php        # ุฅุฏุงุฑุฉ ุงูุฌูุณุงุช
โ       โโโ ValidationHelper.php     # ุงูุชุญูู ูู ุงูุจูุงูุงุช
โ       โโโ CartHelper.php           # ุนูููุงุช ุงูุณูุฉ
โ       โโโ StripeHelper.php         # ุงูุชุนุงูู ูุน Stripe
โ
โโโ views/                    # ๐จ "ุงููุงุฌูุงุช" - ูู ุงููู ุงููุณุชุฎุฏู ุจูุดููู
โ   โโโ layouts/             # ุงูููุงูุจ ุงูุซุงุจุชุฉ (Header, Footer)
โ   โโโ home/                # ุตูุญุฉ ุงูุฑุฆูุณูุฉ
โ   โโโ auth/                # ุตูุญุงุช ุชุณุฌูู ุงูุฏุฎูู ูุงูุชุณุฌูู
โ   โโโ products/            # ุตูุญุงุช ุงูููุชุฌุงุช
โ   โโโ cart/                # ุตูุญุฉ ุงูุณูุฉ
โ   โโโ orders/              # ุตูุญุงุช ุงูุทูุจุงุช
โ   โโโ admin/               # ุตูุญุงุช ููุญุฉ ุงูุชุญูู
โ   โโโ errors/              # ุตูุญุงุช ุงูุฃุฎุทุงุก (404)
โ
โโโ public/                   # ๐ "ุงูุจุงุจ ุงูุฃูุงูู" - ุงููููุงุช ุงูุนุงูุฉ
โ   โโโ index.php            # "ุงูุจูุงุจ" - ููุทุฉ ุฏุฎูู ุงููุดุฑูุน
โ   โโโ .htaccess            # ููุงุนุฏ ุฅุนุงุฏุฉ ุงูุชูุฌูู (Clean URLs)
โ   โโโ css/                 # ูููุงุช ุงูุชูุณูู
โ   โโโ js/                  # ูููุงุช JavaScript
โ
โโโ uploads/                  # ๐ "ุงููุฎุฒู" - ุงูุตูุฑ ุงููุฑููุนุฉ
โ
โโโ composer.json             # ๐ฆ "ูุงุฆูุฉ ุงููุดุชุฑูุงุช" - ุงูููุชุจุงุช ุงููุทููุจุฉ
โโโ .htaccess                 # ุฅุนุฏุงุฏุงุช Apache ุงูุฑุฆูุณูุฉ
```

---

## ๐ ุงูุฌุฒุก ุงูุฃูู: ุงูุจุฏุงูุฉ ูู ุงูุตูุฑ

### ๐ ุงููุชุทูุจุงุช (ุงูุฃุฏูุงุช ุงููู ูุญุชุงุฌูุง ูุจู ูุง ุชุจุฏุฃ)

#### 1. **XAMPP** (ุฃู WAMP ุฃู MAMP)
- **ุฅูู ุฏูุ** ุจุฑูุงูุฌ ุจูุฌูุจูู Apache + MySQL + PHP ูู ุญุฒูุฉ ูุงุญุฏุฉ
- **ุชูุฒูู ููููุ** https://www.apachefriends.org
- **ููู ูุญุชุงุฌูุ** ุนุดุงู ุชูุฏุฑ ุชุดุบู ููุฏ PHP ุนูู ุฌูุงุฒู

#### 2. **PHP 8.0 ุฃู ุฃุนูู**
- ุจููุฌู ูุน XAMPP ุนุงุฏุฉู
- ููุชุฃูุฏ: ุงูุชุญ CMD ูุงูุชุจ `php -v`

#### 3. **Composer**
- **ุฅูู ุฏูุ** ูุฏูุฑ ุงูุญุฒู ุจุชุงุน PHP
- **ุชูุฒูู ููููุ** https://getcomposer.org
- **ููู ูุญุชุงุฌูุ** ุนุดุงู ูุซุจุช ููุชุจุฉ Stripe

#### 4. **ูุญุฑุฑ ุฃููุงุฏ** (VS Code ูุซูุงู)
- ุชูุฒูู ูู https://code.visualstudio.com

---

### ๐๏ธ ุฎุทูุฉ 1: ุชุฌููุฒ ุจูุฆุฉ ุงูุนูู

#### ุชุดุบูู XAMPP
1. ุงูุชุญ XAMPP Control Panel
2. ุดุบูู Apache (ุงุถุบุท Start)
3. ุดุบูู MySQL (ุงุถุบุท Start)
4. ูู ุงูุงุชููู ุดุบุงููู ูุจูู ุชูุงู โ

#### ุชุฌููุฒ ุงููุฌูุฏ
1. ุฑูุญ `C:\xampp\htdocs\`
2. ุงุนูู ูุฌูุฏ ุงุณูู `codezilla-store`
3. ุงูุชุญู ูู VS Code

---

### ๐ ุฎุทูุฉ 2: ุฅูุดุงุก ูููู ุงููุฌูุฏุงุช

```bash
cd C:\xampp\htdocs\codezilla-store

# ุงููุฌูุฏุงุช ุงูุฑุฆูุณูุฉ
mkdir app config public views uploads

# ูุฌูุฏุงุช app
mkdir app\controllers app\models app\helpers

# ูุฌูุฏุงุช views
mkdir views\layouts views\home views\auth views\products
mkdir views\cart views\orders views\admin views\errors

# ูุฌูุฏุงุช admin
mkdir views\admin\products views\admin\orders views\admin\categories

# ูุฌูุฏุงุช public
mkdir public\css public\js
```

---

## ๐๏ธ ุงูุฌุฒุก ุงูุซุงูู: ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุฎุทูุฉ 3: ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฃ) ุงูุชุญ phpMyAdmin
1. ูู ุงููุชุตูุญ: `http://localhost/phpmyadmin`
2. ุงุถุบุท "New" ูู ุงูุฌุงูุจ
3. ุงุณู ุงููุงุนุฏุฉ: `codezilla_store`
4. Collation: `utf8mb4_unicode_ci`
5. ุงุถุบุท Create โ

#### ุจ) ุชูููุฐ ููู SQL

ุงุนูู ููู `config/database.sql` ุจุงูููุฏ ุฏู (ููุฎุต):

**ุงูุฌุฏุงูู ุงููุทููุจุฉ:**
- `users` - ุงููุณุชุฎุฏููู (ุนููุงุก ูุฃุฏูู)
- `categories` - ุงูุชุตูููุงุช
- `products` - ุงูููุชุฌุงุช
- `orders` - ุงูุทูุจุงุช
- `order_items` - ุชูุงุตูู ูู ุทูุจ

**ุทุฑููุฉ ุงูุชูููุฐ:**
1. ูู phpMyAdmin ุงุฎุชุงุฑ `codezilla_store`
2. ุชุงุจ "SQL"
3. ุงูุณุฎ ูุญุชูู ุงูููู `config/database.sql` ุงูููุฌูุฏ ูู ุงููุดุฑูุน
4. ุงุถุบุท "Go" โ

**ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูุชุชุถุงู:**
- ุฃุฏูู: `admin@codezilla.com` / `admin123`
- 4 ุชุตูููุงุช
- 4 ููุชุฌุงุช ุชุฌุฑูุจูุฉ

---

## โ๏ธ ุงูุฌุฒุก ุงูุซุงูุซ: ูููุงุช ุงูุฅุนุฏุงุฏุงุช

### ุฎุทูุฉ 4: ููู ุงูุฅุนุฏุงุฏุงุช `config/env.php`

```php
<?php
define('DB_HOST', 'localhost');
define('DB_NAME', 'codezilla_store');
define('DB_USER', 'root');
define('DB_PASS', '');
define('DB_CHARSET', 'utf8mb4');

define('APP_NAME', 'CodeZilla Store');
define('APP_URL', 'http://localhost/codezilla-store/public');
define('APP_ENV', 'development');

define('STRIPE_PUBLIC_KEY', 'pk_test_YOUR_KEY');
define('STRIPE_SECRET_KEY', 'sk_test_YOUR_KEY');

define('SESSION_LIFETIME', 7200);
define('UPLOAD_DIR', __DIR__ . '/../uploads/');
define('MAX_FILE_SIZE', 5242880);
define('ALLOWED_EXTENSIONS', ['jpg', 'jpeg', 'png', 'gif', 'webp']);

define('CSRF_TOKEN_NAME', 'csrf_token');
define('PASSWORD_MIN_LENGTH', 8);
```

---

### ุฎุทูุฉ 5: ููู ุงูุงุชุตุงู `config/database.php`

**ุดุฑุญ ุงูููุฑุฉ:** ุฏู ุงูููู ุงููู ุจูุชุตู ุจูุงุนุฏุฉ ุงูุจูุงูุงุช. ุจูุณุชุฎุฏู **Singleton Pattern** ุนุดุงู ูููู ููู ุงุชุตุงู ูุงุญุฏ ุจุณ.

```php
<?php
class Database {
    private static $instance = null;
    private $connection;

    private function __construct() {
        try {
            $dsn = "mysql:host=" . DB_HOST . ";dbname=" . DB_NAME . ";charset=" . DB_CHARSET;
            $options = [
                PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,
                PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,
                PDO::ATTR_EMULATE_PREPARES => false,
            ];
            $this->connection = new PDO($dsn, DB_USER, DB_PASS, $options);
        } catch (PDOException $e) {
            die("ูุดู ุงูุงุชุตุงู: " . $e->getMessage());
        }
    }

    public static function getInstance() {
        if (self::$instance === null) {
            self::$instance = new self();
        }
        return self::$instance;
    }

    public function getConnection() {
        return $this->connection;
    }

    private function __clone() {}
}
```

**ุงุณุชุฎุฏุงู ุงูููุงุณ:**
```php
$db = Database::getInstance();
$conn = $db->getConnection();
```

---

## ๐ช ุงูุฌุฒุก ุงูุฑุงุจุน: ููุทุฉ ุงูุฏุฎูู (ุงูุจูุงุจ)

### ุฎุทูุฉ 6: ููู `public/index.php`

ุฏู **ุฃูู ููู** ูู ุงููุดุฑูุน! ูู ุงูุทูุจุงุช ุจุชูุฑ ุนููู.

**ุงูููุฑุฉ:** 
- ููุง ุงููุณุชุฎุฏู ููุชุจ `/products` โ ุงูุจูุงุจ ููุฌูู ูู ProductController
- ููุง ููุชุจ `/cart/add` โ ููุฌูู ูู CartController ูุงูุฏุงูุฉ add

```php
<?php
session_start();

// ุชุญููู ุงูุฅุนุฏุงุฏุงุช
require_once __DIR__ . '/../config/env.php';
require_once __DIR__ . '/../config/database.php';

// ุชุญููู ุงูู Helpers
require_once __DIR__ . '/../app/helpers/SessionHelper.php';
require_once __DIR__ . '/../app/helpers/ValidationHelper.php';
require_once __DIR__ . '/../app/helpers/CartHelper.php';
require_once __DIR__ . '/../app/helpers/StripeHelper.php';

// ุชุญููู ุงูู Models
require_once __DIR__ . '/../app/models/User.php';
require_once __DIR__ . '/../app/models/Category.php';
require_once __DIR__ . '/../app/models/Product.php';
require_once __DIR__ . '/../app/models/Order.php';

// ุชุญููู ุงูู Controllers
require_once __DIR__ . '/../app/controllers/HomeController.php';
require_once __DIR__ . '/../app/controllers/AuthController.php';
require_once __DIR__ . '/../app/controllers/ProductController.php';
require_once __DIR__ . '/../app/controllers/CartController.php';
require_once __DIR__ . '/../app/controllers/OrderController.php';
require_once __DIR__ . '/../app/controllers/AdminController.php';

// ูุฑุงุกุฉ ุงูู URL
$url = isset($_GET['url']) ? rtrim($_GET['url'], '/') : '';
$url = filter_var($url, FILTER_SANITIZE_URL);
$url = explode('/', $url);

// ุงูููู ุงูุงูุชุฑุงุถูุฉ
$controller = 'HomeController';
$method = 'index';
$params = [];

// ุชูุฌูู ุงูุทูุจุงุช
if (!empty($url[0])) {
    switch ($url[0]) {
        case 'login':
            $controller = 'AuthController';
            $method = 'login';
            break;
        case 'register':
            $controller = 'AuthController';
            $method = 'register';
            break;
        case 'logout':
            $controller = 'AuthController';
            $method = 'logout';
            break;
        case 'products':
            $controller = 'ProductController';
            $method = isset($url[1]) ? $url[1] : 'index';
            $params = array_slice($url, 2);
            break;
        case 'cart':
            $controller = 'CartController';
            $method = isset($url[1]) ? $url[1] : 'index';
            $params = array_slice($url, 2);
            break;
        case 'orders':
            $controller = 'OrderController';
            $method = isset($url[1]) ? $url[1] : 'index';
            $params = array_slice($url, 2);
            break;
        case 'admin':
            $controller = 'AdminController';
            $method = isset($url[1]) ? $url[1] : 'dashboard';
            $params = array_slice($url, 2);
            break;
        default:
            $controller = 'HomeController';
            $method = 'notFound';
    }
}

// ุชุดุบูู ุงูู Controller
try {
    $controllerInstance = new $controller();
    if (method_exists($controllerInstance, $method)) {
        call_user_func_array([$controllerInstance, $method], $params);
    } else {
        $homeController = new HomeController();
        $homeController->notFound();
    }
} catch (Exception $e) {
    if (APP_ENV === 'development') {
        die("Error: " . $e->getMessage());
    } else {
        die("ุญุฏุซ ุฎุทุฃ. ุญุงูู ูุฑุฉ ุฃุฎุฑู.");
    }
}
```

---

### ุฎุทูุฉ 7: ููู `public/.htaccess`

ุฏู ููู ุจูุฎูู ุงูุฑูุงุจุท ูุถููุฉ (ุจุฏูู `?url=`)

```apache
RewriteEngine On
RewriteBase /codezilla-store/public/

# ูู ุงูููู ุฃู ุงููุฌูุฏ ููุฌูุฏุ ุงุนุฑุถู
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# ูู ูุด ููุฌูุฏุ ูุฌูู ูู index.php
RewriteRule ^(.*)$ index.php?url=$1 [QSA,L]
```

**ุงููุชูุฌุฉ:**
- ุจุฏูุงู ูู: `index.php?url=products/show/1`
- ููุจูู: `/products/show/1` โจ

---

## ๐ง ุงูุฌุฒุก ุงูุฎุงูุณ: ููู ููุท MVC

### ูุง ูู MVCุ

**MVC** = Model + View + Controller

**ุชุดุจูู ุงููุทุนู:**
- **Model** (ุงููุงุฏู): ูุฑูุญ ูููุทุจุฎ (ูุงุนุฏุฉ ุงูุจูุงูุงุช) ูุฌูุจ ุงูุทูุจ
- **View** (ุงูุทุจู): ุงูุดูู ุงูููุงุฆู ุงููู ุจูุชูุฏู ููุฒุจูู
- **Controller** (ุงููุฏูุฑ): ูุณุชูุจู ุทูุจ ุงูุฒุจูู ูููุฌู ุงููุงุฏู

**ูุซุงู ุนููู:** ููุง ุงููุณุชุฎุฏู ูุทูุจ `/products`:
1. **Controller** ูุณุชูุจู ุงูุทูุจ
2. **Model** ูุฌูุจ ุงูููุชุฌุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. **View** ูุนุฑุถ ุงูููุชุฌุงุช ุจุดูู ุฌููู

---

## ๐ฆ ุงูุฌุฒุก ุงูุณุงุฏุณ: ุงูู Models

### ุฎุทูุฉ 8: User Model (ูุซุงู)

ุงูู Model ูุณุคูู ุนู ุงูุชุนุงูู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช ููุท.

**ุงููุธุงุฆู ุงูุฃุณุงุณูุฉ:**
- `getAll()` - ุฌูุจ ูู ุงูุณุฌูุงุช
- `getById($id)` - ุฌูุจ ุณุฌู ูุงุญุฏ
- `create($data)` - ุฅุถุงูุฉ ุณุฌู ุฌุฏูุฏ
- `update($id, $data)` - ุชุญุฏูุซ ุณุฌู
- `delete($id)` - ุญุฐู ุณุฌู

**ููุงุท ูููุฉ:**
- โ ุงุณุชุฎุฏู **Prepared Statements** ุฏุงุฆูุงู (ุญูุงูุฉ ูู SQL Injection)
- โ ุงุณุชุฎุฏู `password_hash()` ูุชุดููุฑ ูููุงุช ุงููุฑูุฑ
- โ ุงุณุชุฎุฏู `password_verify()` ููุชุญูู ูู ูููุฉ ุงููุฑูุฑ

---

## ๐ฎ ุงูุฌุฒุก ุงูุณุงุจุน: ุงูู Controllers

### ุฎุทูุฉ 9: HomeController

```php
<?php
class HomeController {
    private $productModel;

    public function __construct() {
        $this->productModel = new Product();
    }

    public function index() {
        $featuredProducts = $this->productModel->getFeatured(8);
        $latestProducts = $this->productModel->getAll(12);

        require_once __DIR__ . '/../../views/layouts/header.php';
        require_once __DIR__ . '/../../views/home/index.php';
        require_once __DIR__ . '/../../views/layouts/footer.php';
    }

    public function notFound() {
        http_response_code(404);
        require_once __DIR__ . '/../../views/errors/404.php';
    }
}
```

**ุดุฑุญ:**
- `__construct()`: ูููุฐ ุฃูู ูุง ููุดุฆ ุงููุงุฆู
- `index()`: ุงูุฏุงูุฉ ุงูุงูุชุฑุงุถูุฉ ููุตูุญุฉ ุงูุฑุฆูุณูุฉ
- ูุณุชุฏุนู ุงูู Model ูุฌูุจ ุงูุจูุงูุงุช
- ูุณุชุฏุนู ุงูู Views ูุนุฑุถ ุงูุจูุงูุงุช

---

### ุฎุทูุฉ 10: AuthController (ุชุณุฌูู ุงูุฏุฎูู)

```php
<?php
class AuthController {
    private $userModel;

    public function __construct() {
        $this->userModel = new User();
    }

    public function login() {
        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            $email = $_POST['email'] ?? '';
            $password = $_POST['password'] ?? '';

            $user = $this->userModel->login($email, $password);

            if ($user) {
                $_SESSION['user_id'] = $user['id'];
                $_SESSION['user_name'] = $user['full_name'];
                $_SESSION['user_role'] = $user['role'];
                
                header('Location: ' . APP_URL);
                exit;
            } else {
                $error = 'ุงูุจุฑูุฏ ุฃู ูููุฉ ุงููุฑูุฑ ุบูุฑ ุตุญูุญุฉ';
            }
        }

        require_once __DIR__ . '/../../views/auth/login.php';
    }

    public function logout() {
        session_destroy();
        header('Location: ' . APP_URL);
        exit;
    }
}
```

**ุดุฑุญ:**
- ูุชุญูู ูู ุงูู Method (POST ุฃู GET)
- ูู POST: ูุนุงูุฌ ุงูุจูุงูุงุช
- ูู GET: ูุนุฑุถ ุงูููุฑู
- ุจุนุฏ ุงููุฌุงุญ: ูุญูุธ ุงูุจูุงูุงุช ูู ุงูู Session

---

## ๐จ ุงูุฌุฒุก ุงูุซุงูู: ุงูู Views (ุงููุงุฌูุงุช)

### ุฎุทูุฉ 11: Header Layout

ููู `views/layouts/header.php`:

```php
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?= APP_NAME ?></title>
    <link rel="stylesheet" href="<?= APP_URL ?>/css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="<?= APP_URL ?>" class="logo"><?= APP_NAME ?></a>
            <ul class="nav-links">
                <li><a href="<?= APP_URL ?>">ุงูุฑุฆูุณูุฉ</a></li>
                <li><a href="<?= APP_URL ?>/products">ุงูููุชุฌุงุช</a></li>
                
                <?php if (isset($_SESSION['user_id'])): ?>
                    <li><a href="<?= APP_URL ?>/cart">ุงูุณูุฉ</a></li>
                    <li><a href="<?= APP_URL ?>/orders">ุทูุจุงุชู</a></li>
                    
                    <?php if ($_SESSION['user_role'] === 'admin'): ?>
                        <li><a href="<?= APP_URL ?>/admin">ููุญุฉ ุงูุชุญูู</a></li>
                    <?php endif; ?>
                    
                    <li><a href="<?= APP_URL ?>/logout">ุชุณุฌูู ุฎุฑูุฌ</a></li>
                <?php else: ?>
                    <li><a href="<?= APP_URL ?>/login">ุชุณุฌูู ุฏุฎูู</a></li>
                    <li><a href="<?= APP_URL ?>/register">ุฅูุดุงุก ุญุณุงุจ</a></li>
                <?php endif; ?>
            </ul>
        </div>
    </nav>
    <main>
```

---

### ุฎุทูุฉ 12: ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู

ููู `views/auth/login.php`:

```php
<div class="auth-container">
    <form method="POST" class="auth-form">
        <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
        
        <?php if (isset($error)): ?>
            <div class="alert alert-error"><?= htmlspecialchars($error) ?></div>
        <?php endif; ?>
        
        <div class="form-group">
            <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
            <input type="email" name="email" required>
        </div>
        
        <div class="form-group">
            <label>ูููุฉ ุงููุฑูุฑ</label>
            <input type="password" name="password" required>
        </div>
        
        <button type="submit" class="btn btn-primary">ุฏุฎูู</button>
        
        <p>ููุณ ูุฏูู ุญุณุงุจุ <a href="<?= APP_URL ?>/register">ุณุฌู ุงูุขู</a></p>
    </form>
</div>
```

**ููุงุท ุงูุฃูุงู:**
- โ ุงุณุชุฎุฏู `htmlspecialchars()` ูุนุฑุถ ุฃู ูุต ูู ุงููุณุชุฎุฏู (ุญูุงูุฉ ูู XSS)
- โ ุงุณุชุฎุฏู `method="POST"` ููุจูุงูุงุช ุงูุญุณุงุณุฉ
- โ ุฃุถู `required` ูู ุงูุญููู ุงููุทููุจุฉ

---

## ๐ก๏ธ ุงูุฌุฒุก ุงูุชุงุณุน: ุงูู Helpers (ุงูุฃุฏูุงุช ุงููุณุงุนุฏุฉ)

### ุฎุทูุฉ 13: SessionHelper

ููู `app/helpers/SessionHelper.php`:

```php
<?php
class SessionHelper {
    public static function set($key, $value) {
        $_SESSION[$key] = $value;
    }

    public static function get($key, $default = null) {
        return $_SESSION[$key] ?? $default;
    }

    public static function has($key) {
        return isset($_SESSION[$key]);
    }

    public static function delete($key) {
        unset($_SESSION[$key]);
    }

    public static function destroy() {
        session_destroy();
    }

    public static function isLoggedIn() {
        return self::has('user_id');
    }

    public static function isAdmin() {
        return self::get('user_role') === 'admin';
    }

    public static function requireLogin() {
        if (!self::isLoggedIn()) {
            header('Location: ' . APP_URL . '/login');
            exit;
        }
    }

    public static function requireAdmin() {
        self::requireLogin();
        if (!self::isAdmin()) {
            header('Location: ' . APP_URL);
            exit;
        }
    }
}
```

**ุงูุงุณุชุฎุฏุงู:**
```php
SessionHelper::set('user_id', 1);
SessionHelper::requireAdmin(); // ูุชุฃูุฏ ุงููุณุชุฎุฏู ุฃุฏูู
```

---

## ๐ ุงูุฌุฒุก ุงูุนุงุดุฑ: ุณูุฉ ุงูุชุณูู (Shopping Cart)

### ุฎุทูุฉ 14: CartHelper

ููู `app/helpers/CartHelper.php`:

```php
<?php
class CartHelper {
    // ุฅุถุงูุฉ ููุชุฌ ููุณูุฉ
    public static function add($productId, $quantity = 1) {
        if (!isset($_SESSION['cart'])) {
            $_SESSION['cart'] = [];
        }

        if (isset($_SESSION['cart'][$productId])) {
            $_SESSION['cart'][$productId] += $quantity;
        } else {
            $_SESSION['cart'][$productId] = $quantity;
        }
    }

    // ุชุญุฏูุซ ูููุฉ ููุชุฌ
    public static function update($productId, $quantity) {
        if ($quantity <= 0) {
            self::remove($productId);
        } else {
            $_SESSION['cart'][$productId] = $quantity;
        }
    }

    // ุญุฐู ููุชุฌ ูู ุงูุณูุฉ
    public static function remove($productId) {
        unset($_SESSION['cart'][$productId]);
    }

    // ุฅูุฑุงุบ ุงูุณูุฉ
    public static function clear() {
        $_SESSION['cart'] = [];
    }

    // ุฌูุจ ูุญุชููุงุช ุงูุณูุฉ
    public static function getItems() {
        return $_SESSION['cart'] ?? [];
    }

    // ุญุณุงุจ ุงูุฅุฌูุงูู
    public static function getTotal() {
        $total = 0;
        $productModel = new Product();
        
        foreach (self::getItems() as $productId => $quantity) {
            $product = $productModel->getById($productId);
            if ($product) {
                $price = $product['sale_price'] ?? $product['price'];
                $total += $price * $quantity;
            }
        }
        
        return $total;
    }

    // ุนุฏุฏ ุงูููุชุฌุงุช ูู ุงูุณูุฉ
    public static function getCount() {
        return array_sum(self::getItems());
    }
}
```

---

### ุฎุทูุฉ 15: CartController

```php
<?php
class CartController {
    private $productModel;

    public function __construct() {
        SessionHelper::requireLogin();
        $this->productModel = new Product();
    }

    public function index() {
        $cartItems = CartHelper::getItems();
        $items = [];
        $total = 0;

        foreach ($cartItems as $productId => $quantity) {
            $product = $this->productModel->getById($productId);
            if ($product) {
                $price = $product['sale_price'] ?? $product['price'];
                $items[] = [
                    'product' => $product,
                    'quantity' => $quantity,
                    'subtotal' => $price * $quantity
                ];
                $total += $price * $quantity;
            }
        }

        require_once __DIR__ . '/../../views/layouts/header.php';
        require_once __DIR__ . '/../../views/cart/index.php';
        require_once __DIR__ . '/../../views/layouts/footer.php';
    }

    public function add() {
        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            $productId = $_POST['product_id'] ?? 0;
            $quantity = $_POST['quantity'] ?? 1;

            CartHelper::add($productId, $quantity);
            
            header('Location: ' . APP_URL . '/cart');
            exit;
        }
    }

    public function update() {
        if ($_SERVER['REQUEST_METHOD'] === 'POST') {
            $productId = $_POST['product_id'] ?? 0;
            $quantity = $_POST['quantity'] ?? 1;

            CartHelper::update($productId, $quantity);
            
            header('Location: ' . APP_URL . '/cart');
            exit;
        }
    }

    public function remove($productId) {
        CartHelper::remove($productId);
        header('Location: ' . APP_URL . '/cart');
        exit;
    }
}
```

---

## ๐ณ ุงูุฌุฒุก ุงูุญุงุฏู ุนุดุฑ: ุงูุฏูุน ุงูุฅููุชุฑููู (Stripe)

### ุฎุทูุฉ 16: ุชุซุจูุช Stripe

ูู Terminal:
```bash
composer require stripe/stripe-php
```

### ุฎุทูุฉ 17: StripeHelper

ููู `app/helpers/StripeHelper.php`:

```php
<?php
require_once __DIR__ . '/../../vendor/autoload.php';

class StripeHelper {
    public static function createCheckoutSession($orderId, $items) {
        \Stripe\Stripe::setApiKey(STRIPE_SECRET_KEY);

        $lineItems = [];
        foreach ($items as $item) {
            $lineItems[] = [
                'price_data' => [
                    'currency' => 'usd',
                    'product_data' => [
                        'name' => $item['product']['name'],
                    ],
                    'unit_amount' => $item['product']['price'] * 100, // ุจุงูุณูุช
                ],
                'quantity' => $item['quantity'],
            ];
        }

        $session = \Stripe\Checkout\Session::create([
            'payment_method_types' => ['card'],
            'line_items' => $lineItems,
            'mode' => 'payment',
            'success_url' => APP_URL . '/orders/success?order_id=' . $orderId,
            'cancel_url' => APP_URL . '/orders/cancel?order_id=' . $orderId,
        ]);

        return $session;
    }
}
```

---

## ๐ ุงูุฌุฒุก ุงูุซุงูู ุนุดุฑ: ูุตุงุฆุญ ููุชุทุจูู

### ุชุฑุชูุจ ุจูุงุก ุงููุดุฑูุน (ุฎุทูุฉ ุจุฎุทูุฉ)

1. **ุงุจุฏุฃ ุจุงูุฅุนุฏุงุฏุงุช** โ
   - `config/env.php`
   - `config/database.php`
   - `config/database.sql`

2. **ุจุนุฏูุง ุงููุฌูุฏุงุช ูุงููููุงุช ุงูุฃุณุงุณูุฉ** โ
   - `public/index.php`
   - `public/.htaccess`

3. **ุจุนุฏูุง ุงูู Helpers** โ
   - `SessionHelper.php`
   - `ValidationHelper.php`
   - `CartHelper.php`

4. **ุจุนุฏูุง ุงูู Models** โ
   - `User.php`
   - `Category.php`
   - `Product.php`
   - `Order.php`

5. **ุจุนุฏูุง ุงูู Controllers** โ
   - `HomeController.php`
   - `AuthController.php`
   - `ProductController.php`
   - `CartController.php`
   - `OrderController.php`
   - `AdminController.php`

6. **ุฃุฎูุฑุงู ุงูู Views** โ
   - `layouts/header.php` ู `footer.php`
   - ุจุงูู ุงูุตูุญุงุช ุญุณุจ ุงูุญุงุฌุฉ

---

### ุฃุฎุทุงุก ุดุงุฆุนุฉ ูุญููููุง

#### โ ุฎุทุฃ: "Call to undefined function"
**ุงูุณุจุจ:** ูุณูุช ุชุนูู `require_once` ููููู
**ุงูุญู:** ุชุฃูุฏ ุฅูู ุญูููุช ูู ุงููููุงุช ูู `public/index.php`

#### โ ุฎุทุฃ: "404 Not Found" ูู ูู ุงูุตูุญุงุช
**ุงูุณุจุจ:** ููู `.htaccess` ูุด ููุฌูุฏ ุฃู `mod_rewrite` ูุด ููุนูู
**ุงูุญู:** ุชุฃูุฏ ูู ูุฌูุฏ ุงูููู ูุชูุนูู `mod_rewrite` ูู Apache

#### โ ุฎุทุฃ: "Access denied for user"
**ุงูุณุจุจ:** ุจูุงูุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช ุบูุท ูู `env.php`
**ุงูุญู:** ุฑุงุฌุน ุงูุจุงุณููุฑุฏ ูุงุณู ุงููุณุชุฎุฏู

#### โ ุฎุทุฃ: ุงูุตูุฑ ูุด ุจุชุธูุฑ
**ุงูุณุจุจ:** ุงููุณุงุฑ ุบูุท ุฃู ุงููุฌูุฏ ูุงููุด ุตูุงุญูุงุช
**ุงูุญู:** ุชุฃูุฏ ูู `chmod 755 uploads/`

---

## ๐ฏ ุงูุฎูุงุตุฉ ูุงูุฎุทูุงุช ุงูุชุงููุฉ

### โ ูุง ุฃูุฌุฒูุงู

ุจุนุฏ ุงุชุจุงุน ูุฐุง ุงูุฏูููุ ูููู ุนูุฏู:
- โ ูุชุฌุฑ ุฅููุชุฑููู ูุงูู ุจูุธุงู MVC
- โ ูุธุงู ุชุณุฌูู ุฏุฎูู ุขูู
- โ ุฅุฏุงุฑุฉ ููุชุฌุงุช ูุชุตูููุงุช
- โ ุณูุฉ ุชุณูู
- โ ูุธุงู ุทูุจุงุช
- โ ุชูุงูู ูุน Stripe ููุฏูุน
- โ ููุญุฉ ุชุญูู ููุฃุฏูู

### ๐ ููุชุทููุฑ ุฃูุซุฑ

**ููุฒุงุช ุฅุถุงููุฉ ุชูุฏุฑ ุชุถูููุง:**
- ๐ ูุธุงู ุจุญุซ ูุชูุฏู
- โญ ุชููููุงุช ููุฑุงุฌุนุงุช ุงูููุชุฌุงุช
- ๐ง ุฅุฑุณุงู ุฅููููุงุช ุชุฃููุฏ
- ๐ฑ ุชุตููู ูุชุฌุงูุจ (Responsive)
- ๐ ุฏุนู ูุบุงุช ูุชุนุฏุฏุฉ
- ๐ ุชูุงุฑูุฑ ูุจูุนุงุช ูุชูุฏูุฉ
- ๐ซ ููุจููุงุช ุฎุตู
- ๐ฆ ุชุชุจุน ุงูุดุญู

### ๐ ูุตุงุฆุญ ุงูุฃูุงู ุงูููุงุฆูุฉ

1. **ูุง ุชูุณุฎ ุงููููุงุช ุงูุญุณุงุณุฉ ุนูู Git**
   - ุฃุถู `config/env.php` ูู `.gitignore`

2. **ุงุณุชุฎุฏู HTTPS ูู ุงูุฅูุชุงุฌ**
   - ูุง ุชูุดุฑ ุงููููุน ุจุฏูู SSL

3. **ุบููุฑ ุงูุจุงุณููุฑุฏ ุงูุงูุชุฑุงุถู ููุฃุฏูู**
   - `admin123` ููุชุฌุฑุจุฉ ููุท!

4. **ูุนูู Error Reporting ุจุญุฐุฑ**
   - ูู ุงูุฅูุชุงุฌ ุฎูููุง `APP_ENV = production`

5. **ุนูู Backup ุฏูุฑู**
   - ุงุญูุธ ูุณุฎุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

**ูุตุงุฏุฑ ูููุฏุฉ:**
- [ุชูุซูู PHP ุงูุฑุณูู](https://www.php.net/docs.php)
- [ุชูุซูู MySQL](https://dev.mysql.com/doc/)
- [Stripe API Docs](https://stripe.com/docs/api)

**ุฃุณุฆูุฉ ุดุงุฆุนุฉ:**
- ุงููุดุฑูุน ููุฌูุฏ ูู `C:\xampp\htdocs\codezilla-store`
- ุงูุฑุงุจุท: `http://localhost/codezilla-store/public`
- phpMyAdmin: `http://localhost/phpmyadmin`

---

## ๐ ูุจุฑูู!

ุฃูุช ุงูุขู ุนูุฏู ููู ูุงูู ูุจูุงุก ูุชุฌุฑ ุฅููุชุฑููู ูู ุงูุตูุฑ ุจุงุณุชุฎุฏุงู PHP ู MySQL!

**ูุง ุชุชููู ููุง:**
- ุฌุฑุจ ุชุถูู ููุฒุงุช ุฌุฏูุฏุฉ
- ุงูุฑุฃ ุนู Design Patterns
- ุชุนูู Laravel (ูุฑููููุฑู PHP ุงุญุชุฑุงูู)
- ุงุจูู ูุดุงุฑูุน ุฃูุซุฑ

**ุญุธ ูููู ูู ุฑุญูุชู ุงูุจุฑูุฌูุฉ! ๐**

